<html>
<head>
<!--
  THE PURPOSE OF THIS EXAMPLE IS TO SHOW HOW YOU HAVE TO BE CAREFUL
  YOU UNDERSTAND WHAT "ENVIRONMENT" MAKES UP A CLOSURE!
-->

</head>

<body>
<h1>



<script>

function createThis () {
   var result = new Array();

   for (var i = 0; i < 10; i++) {
     result[i] = function() { return i; }
   }

   return result; // return an array of functions
};

x = createThis();

// NOTE THAT RESULT ARRAY STORES CLOSURES (AND NOT JUST FUNCTIONS)
// TODO: WHAT WILL HAPPEN IF YOU UNCOMMENT THE BELOW LINES? WHY?
// TRY IT!
document.write(x[0]() + "<br>");
document.write(x[1]() + "<br>");
document.write(x[2]() + "<br>");
document.write(x[3]() + "<br>");
document.write(x[4]() + "<br>");
document.write(x[5]() + "<br>");
document.write(x[6]() + "<br>");
document.write(x[7]() + "<br>");
document.write(x[8]() + "<br>");
document.write(x[9]() + "<br>");

// Note that function createThis has exited a long time back.
// Its local variables and arguments are gone
// The function returned by createThis is a CLOSURE.
// It includes the code + the environment that it was created in
// THE VARIABLE i did get set to 10 and so each will show 10!

</script>
</body>
</html>
