<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        <h3>Welcome</h3>
        <div style="border-style: solid; border-width: 2px; height: 600px; width: 200px; float: left; margin-right: 5px;">
            <h4 style="text-align: center;">Following</h4>
        </div>

        <div style="border-style: solid; border-width: 2px; height: 600px; width: 200px; float: left; margin-right: 5px;">
            <h4 style="text-align: center;">Followers</h4>
        </div>
        <div style="margin-left: 5px; float: left;">
            <h4>Post Text: </h4>
            <form method="post" id="post-message">
                <textarea id="post-message-text" style="width: 300px; height: 100px;"></textarea>
                </br>
                <input type="submit"></input>
            </form>
        </div>

        <div style="border-style: solid; border-width: 2px; height: 600px; width: 450px; float: left; text-align: center; margin-left: 5px;">
            <h4>Messages</h4>
        </div>
    <script type="text/javascript">
        $.getJSON("getUsername.php", function() {
            // Do stuff
        });

        function makeCometRequest(php_file, elem_id) {
            // 1. CREATE XHR object
            var xhr = new XMLHttpRequest();
            //xhr.multipart = true;

            // 2. SET UP CALLBACKS
            xhr.onreadystatechange = function() {
                console.log(xhr);

                // // READY STATE == 3 MEANS THAT SOME RESPONSE CAME BACK
                // // NOTE THAT THE ENTIRE RESPONSE RECEIVED SO FAR IS IN responseText
                // if(xhr.readyState == 3) {
                //     document.getElementById("elem_id").innerHTML =  xhr.responseText;
                // }
                //
                // // READY STATE == 4 MEANS THAT ALL RESPONSE HAS COME BACK
                // // NOTE THAT THE ENTIRE RESPONSE IS IN XHR.
                // else if (xhr.readyState == 4) {
                //     document.getElementById("elem_id").innerHTML =  xhr.responseText;
                // }
            };

            // 3. SET UP REQUEST
            // THIS IS A LONG RUNNING PHP FILE
            xhr.open("get", php_file, true);

            // 4. SEND REQUEST
            xhr.send(null);
        }
        makeCometRequest("getMessages.php", "crap");
        makeCometRequest("getFollowing.php", "crap");
        makeCometRequest("getFollower.php", "crap");

        $('#post-message').submit(function (event) {
            event.preventDefault();
            var text = $('#post-message-text').val();
            $.post('postMessage.php', {"message": text}, function(){
                console.log();
            });
        });
    </script>
    </body>
</html>
